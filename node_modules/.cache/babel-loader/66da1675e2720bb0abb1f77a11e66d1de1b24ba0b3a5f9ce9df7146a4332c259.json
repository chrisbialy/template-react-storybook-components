{"ast":null,"code":"var _jsxFileName = \"C:\\\\repos\\\\template-react-storybook-components2\\\\src\\\\components\\\\Carousel.tsx\",\n  _s = $RefreshSig$();\n/** @jsxImportSource @emotion/react */\nimport { css, keyframes } from '@emotion/react';\nimport React from 'react';\nimport { Button } from './Button';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"@emotion/react/jsx-dev-runtime\";\nexport function Carousel({\n  images,\n  animationTimeMs,\n  prev = 'Prev',\n  next = 'Next',\n  ...htmlDivProps\n}) {\n  _s();\n  const [currentImageIndex, setCurrentImageIndex] = React.useState(0);\n  const [nextImageIndex, setNextImageIndex] = React.useState(null);\n  const [animationState, setAnimationState] = React.useState(null);\n  const handlePrevImage = () => {\n    setNextImageIndex((currentImageIndex - 1 + images.length) % images.length);\n  };\n  const handleNextImage = () => {\n    setNextImageIndex((currentImageIndex + 1) % images.length);\n  };\n  React.useEffect(() => {\n    const state = animationState === null || animationState === void 0 ? void 0 : animationState.state;\n    let timeout = null;\n    if (state == null) {\n      if (nextImageIndex != null && nextImageIndex !== currentImageIndex) {\n        setAnimationState({\n          state: 'out',\n          direction: shortestDirection(images.length, currentImageIndex, nextImageIndex)\n        });\n      }\n    } else if (state === 'out') {\n      timeout = setTimeout(() => {\n        if (nextImageIndex != null) {\n          setCurrentImageIndex(nextImageIndex);\n          setAnimationState(prev => ({\n            state: 'in',\n            direction: prev === null || prev === void 0 ? void 0 : prev.direction\n          }));\n        }\n      }, animationTimeMs);\n    } else if (state === 'in') {\n      timeout = setTimeout(() => {\n        setAnimationState(null);\n        setNextImageIndex(null);\n      }, animationTimeMs);\n    }\n    return () => {\n      if (timeout) {\n        clearTimeout(timeout);\n      }\n    };\n  }, [animationState === null || animationState === void 0 ? void 0 : animationState.state, animationTimeMs, currentImageIndex, images.length, nextImageIndex]);\n  const animationStyle = React.useMemo(() => {\n    if ((animationState === null || animationState === void 0 ? void 0 : animationState.state) == null || animationState.direction == null) {\n      return null;\n    }\n    return css`\n      animation-duration: ${animationTimeMs}ms;\n      animation-name: ${slide[animationState.state][animationState.direction]};\n    `;\n  }, [animationState, animationTimeMs]);\n  return _jsxDEV(\"div\", {\n    ...htmlDivProps,\n    css: styles.container,\n    children: [images[currentImageIndex] != null ? _jsxDEV(\"div\", {\n      css: styles.carouselContainer,\n      children: _jsxDEV(\"img\", {\n        css: css`\n              ${styles.image}\n              ${animationStyle}\n            `,\n        src: images[currentImageIndex],\n        alt: \"Carousel Item\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }, this) : _jsxDEV(\"div\", {\n      css: styles.noImage,\n      children: \"No image\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 9\n    }, this), images.length > 1 && _jsxDEV(_Fragment, {\n      children: [_jsxDEV(Button, {\n        css: styles.leftButton,\n        onClick: handlePrevImage,\n        children: prev\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 11\n      }, this), _jsxDEV(Button, {\n        css: styles.rightButton,\n        onClick: handleNextImage,\n        children: next\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 5\n  }, this);\n}\n_s(Carousel, \"QA8u5LuppdtjtL46Sf/R4gn2PRw=\");\n_c = Carousel;\nconst carouselButton = css`\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n`;\nconst styles = {\n  container: css`\n    position: relative;\n  `,\n  carouselContainer: css`\n    height: 100%;\n    overflow: hidden;\n  `,\n  leftButton: css`\n    ${carouselButton};\n    left: 5px;\n  `,\n  rightButton: css`\n    ${carouselButton};\n    right: 5px;\n  `,\n  image: css`\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n    position: relative;\n    animation-fill-mode: forwards;\n  `,\n  noImage: css`\n    display: flex;\n    justify-content: center;\n    height: 100%;\n    flex-direction: column;\n    text-align: center;\n  `\n};\nconst slide = {\n  out: {\n    right: slideAnimation(0, -100),\n    left: slideAnimation(0, 100)\n  },\n  in: {\n    right: slideAnimation(100, 0),\n    left: slideAnimation(-100, 0)\n  }\n};\nfunction slideAnimation(from, to) {\n  return keyframes`\n    from {\n      left: ${from}%;\n    }\n    to {\n      left: ${to}%;\n    }\n  `;\n}\nfunction shortestDirection(arrayLength, A, B) {\n  const distanceRight = (B - A + arrayLength) % arrayLength;\n  const distanceLeft = (A - B + arrayLength) % arrayLength;\n  if (distanceRight < distanceLeft) {\n    return 'right';\n  }\n  if (distanceLeft < distanceRight) {\n    return 'left';\n  }\n  return 'left';\n}\n\n/**\r\n * [0, 1, 2, 3, 4] [0...\r\n * length = 5\r\n *\r\n * shortestDirection(5, 1, 2) -> 'right'\r\n * shortestDirection(5, 4, 0) -> 'right'\r\n * shortestDirection(5, 0, 4) -> 'left'\r\n * shortestDirection(5, 2, 1) -> 'left'\r\n * shortestDirection(5, 1, 4) -> 'right'\r\n * shortestDirection(5, 3, 0) -> 'left'\r\n */\nvar _c;\n$RefreshReg$(_c, \"Carousel\");","map":{"version":3,"names":["css","keyframes","React","Button","jsxDEV","_jsxDEV","Fragment","_Fragment","Carousel","images","animationTimeMs","prev","next","htmlDivProps","_s","currentImageIndex","setCurrentImageIndex","useState","nextImageIndex","setNextImageIndex","animationState","setAnimationState","handlePrevImage","length","handleNextImage","useEffect","state","timeout","direction","shortestDirection","setTimeout","clearTimeout","animationStyle","useMemo","slide","styles","container","children","carouselContainer","image","src","alt","fileName","_jsxFileName","lineNumber","columnNumber","noImage","leftButton","onClick","rightButton","_c","carouselButton","out","right","slideAnimation","left","in","from","to","arrayLength","A","B","distanceRight","distanceLeft","$RefreshReg$"],"sources":["C:/repos/template-react-storybook-components2/src/components/Carousel.tsx"],"sourcesContent":["/** @jsxImportSource @emotion/react */\r\nimport { css, keyframes } from '@emotion/react';\r\nimport React from 'react';\r\nimport { Button } from './Button';\r\n\r\ntype CarouselProps = React.HTMLAttributes<HTMLDivElement> & {\r\n  images: string[];\r\n  animationTimeMs?: number;\r\n  prev?: React.ReactNode;\r\n  next?: React.ReactNode;\r\n};\r\n\r\ntype AnimationState = {\r\n  direction?: 'left' | 'right';\r\n  state?: 'out' | 'in';\r\n};\r\n\r\nexport function Carousel({ images, animationTimeMs, prev = 'Prev', next = 'Next', ...htmlDivProps }: CarouselProps) {\r\n  const [currentImageIndex, setCurrentImageIndex] = React.useState(0);\r\n\r\n  const [nextImageIndex, setNextImageIndex] = React.useState<number | null>(null);\r\n  const [animationState, setAnimationState] = React.useState<AnimationState | null>(null);\r\n\r\n  const handlePrevImage = () => {\r\n    setNextImageIndex((currentImageIndex - 1 + images.length) % images.length);\r\n  };\r\n\r\n  const handleNextImage = () => {\r\n    setNextImageIndex((currentImageIndex + 1) % images.length);\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    const state = animationState?.state;\r\n    let timeout: NodeJS.Timeout | null = null;\r\n    if (state == null) {\r\n      if (nextImageIndex != null && nextImageIndex !== currentImageIndex) {\r\n        setAnimationState({\r\n          state: 'out',\r\n          direction: shortestDirection(images.length, currentImageIndex, nextImageIndex),\r\n        });\r\n      }\r\n    } else if (state === 'out') {\r\n      timeout = setTimeout(() => {\r\n        if (nextImageIndex != null) {\r\n          setCurrentImageIndex(nextImageIndex);\r\n          setAnimationState((prev) => ({\r\n            state: 'in',\r\n            direction: prev?.direction,\r\n          }));\r\n        }\r\n      }, animationTimeMs);\r\n    } else if (state === 'in') {\r\n      timeout = setTimeout(() => {\r\n        setAnimationState(null);\r\n        setNextImageIndex(null);\r\n      }, animationTimeMs);\r\n    }\r\n\r\n    return () => {\r\n      if (timeout) {\r\n        clearTimeout(timeout);\r\n      }\r\n    };\r\n  }, [animationState?.state, animationTimeMs, currentImageIndex, images.length, nextImageIndex]);\r\n\r\n  const animationStyle = React.useMemo(() => {\r\n    if (animationState?.state == null || animationState.direction == null) {\r\n      return null;\r\n    }\r\n    return css`\r\n      animation-duration: ${animationTimeMs}ms;\r\n      animation-name: ${slide[animationState.state][animationState.direction]};\r\n    `;\r\n  }, [animationState, animationTimeMs]);\r\n\r\n  return (\r\n    <div {...htmlDivProps} css={styles.container}>\r\n      {images[currentImageIndex] != null ? (\r\n        <div css={styles.carouselContainer}>\r\n          <img\r\n            css={css`\r\n              ${styles.image}\r\n              ${animationStyle}\r\n            `}\r\n            src={images[currentImageIndex]}\r\n            alt=\"Carousel Item\"\r\n          />\r\n        </div>\r\n      ) : (\r\n        <div css={styles.noImage}>No image</div>\r\n      )}\r\n      {images.length > 1 && (\r\n        <>\r\n          <Button css={styles.leftButton} onClick={handlePrevImage}>\r\n            {prev}\r\n          </Button>\r\n          <Button css={styles.rightButton} onClick={handleNextImage}>\r\n            {next}\r\n          </Button>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nconst carouselButton = css`\r\n  position: absolute;\r\n  top: 50%;\r\n  transform: translateY(-50%);\r\n`;\r\n\r\nconst styles = {\r\n  container: css`\r\n    position: relative;\r\n  `,\r\n  carouselContainer: css`\r\n    height: 100%;\r\n    overflow: hidden;\r\n  `,\r\n  leftButton: css`\r\n    ${carouselButton};\r\n    left: 5px;\r\n  `,\r\n  rightButton: css`\r\n    ${carouselButton};\r\n    right: 5px;\r\n  `,\r\n  image: css`\r\n    width: 100%;\r\n    height: 100%;\r\n    object-fit: cover;\r\n    position: relative;\r\n    animation-fill-mode: forwards;\r\n  `,\r\n  noImage: css`\r\n    display: flex;\r\n    justify-content: center;\r\n    height: 100%;\r\n    flex-direction: column;\r\n    text-align: center;\r\n  `,\r\n};\r\n\r\nconst slide = {\r\n  out: {\r\n    right: slideAnimation(0, -100),\r\n    left: slideAnimation(0, 100),\r\n  },\r\n  in: {\r\n    right: slideAnimation(100, 0),\r\n    left: slideAnimation(-100, 0),\r\n  },\r\n};\r\n\r\nfunction slideAnimation(from: number, to: number) {\r\n  return keyframes`\r\n    from {\r\n      left: ${from}%;\r\n    }\r\n    to {\r\n      left: ${to}%;\r\n    }\r\n  `;\r\n}\r\n\r\nfunction shortestDirection(arrayLength: number, A: number, B: number) {\r\n  const distanceRight = (B - A + arrayLength) % arrayLength;\r\n  const distanceLeft = (A - B + arrayLength) % arrayLength;\r\n\r\n  if (distanceRight < distanceLeft) {\r\n    return 'right';\r\n  }\r\n  if (distanceLeft < distanceRight) {\r\n    return 'left';\r\n  }\r\n  return 'left';\r\n}\r\n\r\n/**\r\n * [0, 1, 2, 3, 4] [0...\r\n * length = 5\r\n *\r\n * shortestDirection(5, 1, 2) -> 'right'\r\n * shortestDirection(5, 4, 0) -> 'right'\r\n * shortestDirection(5, 0, 4) -> 'left'\r\n * shortestDirection(5, 2, 1) -> 'left'\r\n * shortestDirection(5, 1, 4) -> 'right'\r\n * shortestDirection(5, 3, 0) -> 'left'\r\n */\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}